<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Load data from an external GeoJSON file</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js"></script>
    <script src='https://npmcdn.com/@turf/turf/turf.min.js'></script>

    <style>
    body {
        margin: 0;
        padding: 0;
    }

    #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
    }
    </style>
</head>

<body>
    <div id="map"></div>

    <script>
    // Define the geolocations of  the wards
    const wards_geojson = {
        type: 'FeatureCollection',
        features: [{
                type: 'Feature',
                properties: {
                    name: 'Ward 1',
                    color: 'red'
                },
                style: {
                    fill: 'red'
                },
                geometry: {
                    type: 'Polygon',
                    coordinates: [
                        [
                            [-81.590818762779193, 41.027564846154696],
                            [-81.591478586196899, 41.0281752573866],
                            [-81.591489315033002, 41.028289719392198],
                            [-81.591339111328097, 41.0298292140317],
                            [-81.596569418907194, 41.029861911628799],
                            [-81.596612334251404, 41.028380787079001],
                            [-81.598715186119094, 41.028396974427999],
                            [-81.598715186119094, 41.029084932304798],
                            [-81.599251627922001, 41.0293277392947],
                            [-81.599187254905601, 41.032378937589201],
                            [-81.599144339561306, 41.0356565924112],
                            [-81.598575711250206, 41.035648499636899],
                            [-81.592224240302897, 41.035413808761298],
                            [-81.592154502868496, 41.035154838548003],
                            [-81.589601039886503, 41.035073910155297],
                            [-81.589402556419401, 41.034992981655002],
                            [-81.589359641075106, 41.036178574233503],
                            [-81.589622497558594, 41.036364706282797],
                            [-81.589365005493207, 41.036583208451503],
                            [-81.589289903640804, 41.038537556704597],
                            [-81.589284539877596, 41.039282055061904],
                            [-81.589236259460407, 41.041288921730597],
                            [-81.582224919257001, 41.041236323176001],
                            [-81.582283973693805, 41.039621931946598],
                            [-81.577509641647296, 41.039553147357203],
                            [-81.577911972999601, 41.038614434642099],
                            [-81.578260660171495, 41.037008071703497],
                            [-81.577568651555296, 41.036465864780602],
                            [-81.577187777875196, 41.036348520904298],
                            [-81.576608420727993, 41.036336381870697],
                            [-81.576581598637901, 41.036105739806501],
                            [-81.576619149564095, 41.035199349129797],
                            [-81.576678156852694, 41.032573173542602],
                            [-81.576812267303495, 41.028121789215398],
                            [-81.579033137022606, 41.028801656475302],
                            [-81.578979492842294, 41.022601654694803],
                            [-81.5789794921875, 41.021905535484798],
                            [-81.578217744827299, 41.021873157622103],
                            [-81.578174829483004, 41.022601655682898],
                            [-81.577305793762207, 41.022585466924703],
                            [-81.577316522598295, 41.021832685271399],
                            [-81.576608419418307, 41.021832685271399],
                            [-81.576629877090497, 41.020578030061799],
                            [-81.581650972366305, 41.020578029073697],
                            [-81.579226255416899, 41.018003887438503],
                            [-81.596252918243394, 41.018125311474499],
                            [-81.598688364028902, 41.0160610724215],
                            [-81.599460840225206, 41.015421549943298],
                            [-81.600555181503296, 41.014231535895803],
                            [-81.600555181503296, 41.012847206792998],
                            [-81.604385375976605, 41.012839111215598],
                            [-81.601370573043795, 41.0166924935873],
                            [-81.599090695381193, 41.019120980126502],
                            [-81.597737520933194, 41.0201813911643],
                            [-81.595826447009998, 41.021177028735899],
                            [-81.594301611185102, 41.022739258979399],
                            [-81.592905521392794, 41.023945307757501],
                            [-81.593431234359699, 41.024269075481101],
                            [-81.593613624572797, 41.024147662771199],
                            [-81.5942573547363, 41.024107191818203],
                            [-81.594074964523301, 41.024584747478897],
                            [-81.591714620590196, 41.026940860763297],
                            [-81.591253280639606, 41.027263851464397],
                            [-81.590818762779193, 41.027564846154696]
                        ]
                    ]
                }
            },
            {
                type: 'Feature',
                properties: {
                    name: 'Ward 2',
                    color: 'blue'
                },
                geometry: {
                    type: 'Polygon',
                    coordinates: [
                        [
                            [-81.581650972366305, 41.020578029073697],
                            [-81.573207378387494, 41.020578029073697],
                            [-81.573228836059599, 41.019363823855997],
                            [-81.567478179931598, 41.019347634301901],
                            [-81.567456722259493, 41.018149596254801],
                            [-81.5658473968506, 41.018052457079698],
                            [-81.565160751342802, 41.017647708974998],
                            [-81.564989089965806, 41.017178198057699],
                            [-81.563551425933795, 41.017323908700497],
                            [-81.563551425933795, 41.010491351799899],
                            [-81.569967269897504, 41.010475158088603],
                            [-81.589879989623995, 41.010378007596699],
                            [-81.590008735656795, 41.006524261810497],
                            [-81.593742370605497, 41.006459490948203],
                            [-81.592884063720703, 41.004904967200901],
                            [-81.598033905029396, 41.004937353404003],
                            [-81.597990989685101, 41.007916815997199],
                            [-81.600780487060504, 41.007949200719999],
                            [-81.600587368011503, 41.010394201331799],
                            [-81.603934764862103, 41.010442776583801],
                            [-81.605114936828599, 41.010701843989203],
                            [-81.604385375976605, 41.012839111215598],
                            [-81.600555181503296, 41.012847206792998],
                            [-81.600555181503296, 41.014231535895803],
                            [-81.599460840225206, 41.015421549943298],
                            [-81.596252918243394, 41.018125311474499],
                            [-81.579226255416899, 41.018003887438503],
                            [-81.581650972366305, 41.020578029073697]
                        ]
                    ]
                }
            },
            {
                type: 'Feature',
                properties: {
                    name: 'Ward 3',
                    color: 'green'
                },
                geometry: {
                    type: 'Polygon',
                    coordinates: [
                        [
                            [-81.607367992401095, 41.002945572799597],
                            [-81.607003211975098, 41.004888774587599],
                            [-81.605286598205595, 41.0089045433783],
                            [-81.605114936828599, 41.010701843989203],
                            [-81.603934764862103, 41.010442776583801],
                            [-81.600587368011503, 41.010394201331799],
                            [-81.600780487060504, 41.007949200719999],
                            [-81.597990989685101, 41.007916815997199],
                            [-81.598033905029396, 41.004937353404003],
                            [-81.592884063720703, 41.004904967200901],
                            [-81.593742370605497, 41.006459490948302],
                            [-81.590008735656795, 41.006524261810497],
                            [-81.589879989623995, 41.010378007596699],
                            [-81.569967269897504, 41.010475158088603],
                            [-81.569495201110897, 41.010037981723499],
                            [-81.573636531829905, 41.010021790124497],
                            [-81.573808193206801, 41.003253250233897],
                            [-81.572563648223905, 41.003269443743299],
                            [-81.5725421905518, 40.999641998263002],
                            [-81.578469872474699, 40.999540782822898],
                            [-81.578432321548505, 40.998370724966001],
                            [-81.579188704490704, 40.998318091763501],
                            [-81.579309403896403, 40.999554952015401],
                            [-81.582858636975402, 40.999524081348603],
                            [-81.582845896482496, 40.998521537391198],
                            [-81.583691462874498, 40.998523055595498],
                            [-81.583728007972297, 40.999511682372898],
                            [-81.585996150970502, 40.999496247031097],
                            [-81.584386825561495, 40.997520496412598],
                            [-81.580803394317599, 40.9975043014907],
                            [-81.580781936645494, 40.997212792216096],
                            [-81.584107875824003, 40.997131817188802],
                            [-81.582305432675597, 40.994864479004697],
                            [-81.5852236760838, 40.994848283430201],
                            [-81.585180760739604, 40.992823805293],
                            [-81.580674649594599, 40.992840001364797],
                            [-81.580116750119501, 40.992094977944703],
                            [-81.581983567593895, 40.991106999120397],
                            [-81.584386826871196, 40.991398535395199],
                            [-81.584451199887596, 40.9919654077949],
                            [-81.590158940671202, 40.992013996630902],
                            [-81.590137481853205, 40.988612689653102],
                            [-81.600801944896403, 40.988580295428598],
                            [-81.600286960765501, 40.985454177900699],
                            [-81.598377227946898, 40.983850567879003],
                            [-81.596617698669405, 40.981744758123902],
                            [-81.594171524047894, 40.980546036386897],
                            [-81.600437164306598, 40.980805221311201],
                            [-81.600608825683594, 40.975977734926801],
                            [-81.601821184158297, 40.976722940448099],
                            [-81.602990627288804, 40.977921731665901],
                            [-81.604406833648696, 40.978861309552798],
                            [-81.605817675590501, 40.979359442400302],
                            [-81.607228517532306, 40.979598382837601],
                            [-81.610457897186294, 40.979412090367603],
                            [-81.610490083694501, 40.980610832713502],
                            [-81.616449952125507, 40.980740425175597],
                            [-81.616490185260801, 40.979169099398597],
                            [-81.618269830942197, 40.979241996783301],
                            [-81.618279889226002, 40.980752574455899],
                            [-81.621165275573702, 40.980853818371102],
                            [-81.620907783508301, 40.9865556248199],
                            [-81.630477902654107, 40.986814786127198],
                            [-81.630456444982002, 40.988580295428598],
                            [-81.620371339086006, 40.988596492542896],
                            [-81.602668762207003, 40.9884345209746],
                            [-81.603505611419706, 40.989147191811703],
                            [-81.605372428894, 40.9903133638391],
                            [-81.606788635253906, 40.992305526670897],
                            [-81.608161926269503, 40.994670129624701],
                            [-81.610114574432401, 40.9946863254901],
                            [-81.610178947448702, 40.996726941548701],
                            [-81.609985828399701, 40.999480053583099],
                            [-81.609578132629395, 41.000953731008899],
                            [-81.608676910400405, 41.003042733755599],
                            [-81.607367992401095, 41.002945572799597]
                        ]
                    ]
                }
            },
            {
                type: 'Feature',
                properties: {
                    name: 'Ward 4',
                    color: 'yellow'
                },
                geometry: {
                    type: 'Polygon',
                    coordinates: [
                        [
                            [-81.6183167695999, 41.011786677686104],
                            [-81.618016362190204, 41.0177772286399],
                            [-81.616213917732196, 41.021727456055601],
                            [-81.614132523536696, 41.025815044414202],
                            [-81.609551310539203, 41.025839325865199],
                            [-81.609497666358905, 41.029687900976697],
                            [-81.605431437492399, 41.029602919096803],
                            [-81.605431436837506, 41.0297243222426],
                            [-81.603435873330497, 41.029700041730102],
                            [-81.601810454667401, 41.029667667699798],
                            [-81.601788997650104, 41.028214866695599],
                            [-81.599251627922101, 41.028194632472001],
                            [-81.599251627922101, 41.0293277392947],
                            [-81.598715186119094, 41.029084932304798],
                            [-81.598715186119094, 41.028396974427999],
                            [-81.596612334251404, 41.028380787079001],
                            [-81.596569418907194, 41.029861911628799],
                            [-81.591339111328097, 41.0298292140317],
                            [-81.591478586196899, 41.0281752573866],
                            [-81.590818762779193, 41.027564846154696],
                            [-81.591714620590196, 41.026940860763297],
                            [-81.594074964523301, 41.024584747478897],
                            [-81.5942573547363, 41.024107191818203],
                            [-81.593613624572797, 41.024147662771199],
                            [-81.593431234359699, 41.024269075481101],
                            [-81.592905521392794, 41.023945307757501],
                            [-81.594301611185102, 41.022739258979399],
                            [-81.595826447009998, 41.021177028735899],
                            [-81.597737520933194, 41.0201813911643],
                            [-81.599090695381193, 41.019120980126502],
                            [-81.601370573043795, 41.0166924935873],
                            [-81.604385375976605, 41.012839111215598],
                            [-81.605114936828599, 41.010701843989203],
                            [-81.605833768189797, 41.011147113712198],
                            [-81.606595514895204, 41.0117866776854],
                            [-81.607153414370302, 41.011980974371703],
                            [-81.616380213381504, 41.012175270485102],
                            [-81.6183167695999, 41.011786677686104]
                        ]
                    ]
                }
            },
            {
                type: 'Feature',
                properties: {
                    name: 'Ward 5',
                    color: 'purple'
                },
                geometry: {
                    type: 'Polygon',
                    coordinates: [
                        [
                            [-81.6183167695999, 41.011786677686104],
                            [-81.624727249145494, 41.010507545507203],
                            [-81.634640693664593, 41.006621416007903],
                            [-81.637601852417006, 41.005973705475199],
                            [-81.638760566711397, 41.005617461968498],
                            [-81.638631820678697, 41.0096979540955],
                            [-81.639039516449003, 41.009876063083098],
                            [-81.639425754547105, 41.010458968326503],
                            [-81.639318466186495, 41.016052977238999],
                            [-81.630327701568604, 41.0159234544317],
                            [-81.629523038864093, 41.016368688864297],
                            [-81.628755926758501, 41.016801777652397],
                            [-81.627666949570994, 41.017817703728902],
                            [-81.627656220734906, 41.018942894402699],
                            [-81.627109050750704, 41.018983368344003],
                            [-81.627098321914701, 41.019375966080702],
                            [-81.627098321914701, 41.020258290599202],
                            [-81.625124216243407, 41.020270432535497],
                            [-81.625172496005703, 41.020922049815901],
                            [-81.625006198883099, 41.0257583860135],
                            [-81.614132523536696, 41.025815044414202],
                            [-81.616213917732196, 41.021727456055601],
                            [-81.618016362190204, 41.0177772286399],
                            [-81.6183167695999, 41.011786677686104]
                        ]
                    ]
                }
            },
            {
                type: 'Feature',
                properties: {
                    name: 'Ward 6',
                    color: 'orange'
                },
                geometry: {
                    type: 'Polygon',
                    coordinates: [
                        [
                            [-81.618306040763898, 41.011762390563497],
                            [-81.616369484545402, 41.012150983505897],
                            [-81.6071426855342, 41.011956687320797],
                            [-81.606584786059102, 41.011762390562701],
                            [-81.605823039353695, 41.011122826354303],
                            [-81.605104207992596, 41.010677556467201],
                            [-81.605275869369507, 41.008880255193603],
                            [-81.606992483138995, 41.004864484922699],
                            [-81.607357263565106, 41.002921282418598],
                            [-81.608666181564303, 41.003018443409999],
                            [-81.612710952758803, 41.003228959472402],
                            [-81.615500450134306, 41.003228959472402],
                            [-81.616889834404006, 41.003115603764698],
                            [-81.617960035800905, 41.002807925193999],
                            [-81.6191375255585, 41.002394986075302],
                            [-81.619169712066693, 41.000176408785698],
                            [-81.621637344360394, 41.000224991569901],
                            [-81.621648073196397, 40.999860619815301],
                            [-81.6240620613098, 40.999909202832399],
                            [-81.624062062619501, 41.000305964773801],
                            [-81.630311609624201, 41.000354547462599],
                            [-81.630303562997099, 41.000020540754697],
                            [-81.632159650325804, 41.000028637907597],
                            [-81.632175743579893, 41.000289770536398],
                            [-81.633530259132399, 41.000305964773801],
                            [-81.636368034960498, 41.000334304680003],
                            [-81.638240216852907, 41.000350498906002],
                            [-81.638352869631504, 40.9977512746093],
                            [-81.638422607065905, 40.997390937917999],
                            [-81.636883020401001, 40.993811756416697],
                            [-81.637912988662706, 40.9937955605835],
                            [-81.637494564056396, 40.991787246447203],
                            [-81.638009548187298, 40.991779149270698],
                            [-81.637988090515094, 40.990839755415401],
                            [-81.637827157974201, 40.990839755415401],
                            [-81.637848615646405, 40.988539803615197],
                            [-81.647032499313397, 40.9885479021778],
                            [-81.646978855133099, 40.992532273345397],
                            [-81.648566722869901, 40.992524175272202],
                            [-81.649307012557998, 40.9933258796937],
                            [-81.650562286376996, 40.993317781718403],
                            [-81.6504549980164, 40.996087231411103],
                            [-81.649875640869098, 40.996071036136598],
                            [-81.6496932506561, 40.999172358537699],
                            [-81.649832725524902, 40.999706775334801],
                            [-81.649585962295504, 40.999731066889701],
                            [-81.649510860443101, 41.000743207667597],
                            [-81.650251150131197, 41.0013828726238],
                            [-81.650251150131197, 41.001520521233502],
                            [-81.6486847400665, 41.001921319958299],
                            [-81.648706197738704, 41.002186493533202],
                            [-81.647890806198106, 41.002197626751098],
                            [-81.647837162017794, 41.002114127568298],
                            [-81.644452214240999, 41.003724124993902],
                            [-81.643618047237396, 41.0036951539903],
                            [-81.6432224214077, 41.003850699031098],
                            [-81.643206998705907, 41.004859582200503],
                            [-81.641933284699903, 41.004853936747601],
                            [-81.639547627419205, 41.005927947620599],
                            [-81.639425754547105, 41.010458968326503],
                            [-81.639039516449003, 41.009876063083098],
                            [-81.638631820678697, 41.0096979540955],
                            [-81.638760566711397, 41.005617461968498],
                            [-81.637601852417006, 41.005973705475199],
                            [-81.634640693664593, 41.006621416007903],
                            [-81.624727249145494, 41.010507545507203],
                            [-81.618306040763898, 41.011762390563497]
                        ]
                    ]
                }
            }
        ]
    };

    // TO MAKE THE MAP APPEAR YOU MUST
    // ADD YOUR ACCESS TOKEN FROM
    // https://account.mapbox.com
    mapboxgl.accessToken =
        'pk.eyJ1IjoianVzdGluZ3JlZXJiYmkiLCJhIjoiY2x0MzRsaDVsMWpiNjJqcDhybzVxeWZxOSJ9.YE6541dulAHiFDz0-i2wsA';
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
        style: 'mapbox://styles/mapbox/streets-v12', // style URL
        zoom: 12, // starting zoom
        center: [-81.60512, 41.01283] // // starting center in [lng, lat]
    });

    map.on('style.load', () => {
        map.setFog({}); // Set the default atmosphere style
    });

    // Map on load event
    map.on('load', () => {
        map.addLayer({
            'id': 'wards',
            'type': 'fill',
            'source': {
                'type': 'geojson',
                'data': wards_geojson
            },
            'layout': {},
            'paint': {
                'fill-color': ['get', 'color'],
                'fill-opacity': 0.2
            }
        });

        // Simple map event to get the coordinates of the clicked point
        map.on('click', function(e) {
            var coordinates = e.lngLat;

            var ward = wardInfo([coordinates.lng, coordinates.lat]);
            new mapboxgl.Popup()
                .setLngLat(coordinates)
                .setHTML('Ward Info: <br/>' + ward)
                .addTo(map);
        });

        //var isInside = pointInsidePolygon([-81.585379, 41.021429]);

        //console.log(wards_geojson.features[0].geometry
        //    .coordinates);

        //return;
        //console.log('Is Inside Ward 1: ', isInside);
    });

    function wardInfo(point) {
        //var wardInfo = null;
        for (var i = 0; i < wards_geojson.features.length; i++) {
            var outline = wards_geojson.features[i].geometry.coordinates;

            var pt = turf.point(point);
            var poly = turf.polygon(outline);

            if (turf.booleanPointInPolygon(pt, poly.geometry)) {
                return wards_geojson.features[i].properties.name;
            }

            //return wardInfo;
        }
    }
    </script>

</body>

</html>